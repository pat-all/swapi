(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{38:function(e,t,n){e.exports=n(65)},43:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),i=(n(43),n(7)),l=(n(48),n(8)),s=n(16),u=(n(49),n(17)),m=(n(50),function(e){var t=e.children;return a.a.createElement("button",{className:"header-item header-button"},t)}),f=(n(51),function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(s.f)().pathname.split("/")[1];return a.a.createElement("div",{className:"search"},a.a.createElement("input",{type:"text",placeholder:"Search",value:n,onChange:function(e){c(e.target.value)}}),a.a.createElement(m,null,a.a.createElement(l.b,{to:"/".concat(o,"/?search=").concat(n)},"Search")))}),g=n(20),p=(n(35),"http://cors-anywhere.herokuapp.com/https://swapi.co/api"),d={string:/[a-z]+/,number:/[0-9]+/,page:/\?page=[0-9]+/,search:/\?search=.+/},E="CATEGORY",h=function(e){return d.page.test(e)},v=function(e){return e[Object.keys(e)[0]]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,n=e.page,r=e.search,a=e.url;return!t||n||r?t&&n>0&&!r?"".concat(p,"/").concat(t,"/?page=").concat(n):t&&!n&&r?"".concat(p,"/").concat(t,"/?search=").concat(r):!a||t||n||r?p:"".concat(p).concat(a):"".concat(p,"/").concat(t)},j=function(e){return e.includes("https://swapi.co/api")?e.replace("https://swapi.co/api",""):e},O=function(e,t){var n=e[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.string,n=e.number;return t?t.match(d.string)[0]:n?"number"===typeof n?n:n.match(d.number)[0]:null}({string:j(t)})],r=y(n,{fieldName:"url",fieldValue:t}),a=r.length>0?r[0]:null;return a?v(a):null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.pages,r=t.fieldName,a=t.fieldValue,c="url"===r,o=[];if(n&&r&&a){for(var i=0;i<n.length;i++){var l=n[i];if(l)for(var s=0;s<l.length;s++){var u=l[s];if(u[r].includes(a)&&(o.push(u),c))return o}if(c&&o.length>0)return o}return o}return o},x=function(e){return function(e){return d.search.test(e)}(e)?e.replace("?search=",""):null},k=Object(g.b)({slice:"categories",initialState:{isFetching:!1,entities:{}},reducers:{requestAll:function(e){e.isFetching=!0},receiveAll:function(e,t){e.isFetching=!1,Object.keys(t.payload).map(function(t){return e.entities[t]={count:0,activePage:1,pages:[],search:{query:"",results:[]}}})},requestPage:function(e,t){},receivePage:function(e,t){var n=t.payload,r=n.category,a=n.json,c=n.page,o=a.count,i=a.results;e.entities[r].count=o,e.entities[r].pages[c]=i},setActivePage:function(e,t){var n=t.payload,r=n.category,a=n.page;e.entities[r].activePage=Number(a)},requestItem:function(e,t){},receiveItem:function(e,t){var n=t.payload,r=n.category,a=n.json;e.entities[r].pages[0]?e.entities[r].pages[0].push(a.results[0]):e.entities[r].pages[0]=[a.results[0]]},cancelFetching:function(e){e.isFetching=!1},searchRequest:function(e,t){},receiveSearchData:function(e,t){var n=t.payload,r=n.category,a=n.query,c=n.json.results,o=e.entities[r].pages;e.entities[r].search={query:a,results:c},c.forEach(function(t){0===y(e.entities[r],{fieldName:"url",fieldValue:t.url}).length&&(o[0]?o[0].push(t):o[0]=[t])})}}}),w=k.actions,N=w.requestAll,F=w.receiveAll,S=w.requestItem,C=w.receiveItem,q=w.setActivePage,A=w.requestPage,P=w.receivePage,H=(w.fetchDataFail,w.cancelFetching),I=w.searchRequest,R=w.receiveSearchData,V=k.reducer,D=a.a.memo(function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors.connectionError.isError}),n=Object.keys(e.entities),c=Object(i.b)(),o=e.isFetching;return Object(r.useEffect)(function(){t||o||0!==n.length||c(N())}),a.a.createElement("header",null,a.a.createElement("div",{className:"header-section"},a.a.createElement("div",{className:"header-logo header-item"},"SWAPI"),a.a.createElement("div",{className:"header-item nav-top"},a.a.createElement(l.c,{exact:!0,to:"/",activeClassName:"selected"},"home")),n.map(function(e){return a.a.createElement("div",{key:e,className:"header-item nav-top"},a.a.createElement(l.c,{to:"/".concat(e),activeClassName:"selected"},e))})),a.a.createElement("div",{className:"header-section"},a.a.createElement(f,null)))}),B=(n(54),function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"Hello, this is Home component"))}),W=(n(55),n(56),function(){var e=Object(s.h)().url,t=Object(i.b)(),n=Object(s.g)().category,c=Object(i.c)(function(e){return e.categories}),o=c.entities,u=c.isFetching,m=Object(i.c)(function(e){return e.errors}).connectionError,f=o[n],g=[],p=[],d=null;return Object(r.useEffect)(function(){u||m.isError||!f||d||0!==y(f,{fieldName:"url",fieldValue:e}).length||t(S({category:n,url:e}))}),!u&&f&&e&&!d&&(p=y(f,{fieldName:"url",fieldValue:e}),g=(d=p.length>0?p[0]:null)?Object.keys(d):[]),a.a.createElement("section",{className:"right-section"},a.a.createElement("div",{className:"data-container"},d&&g.length>0&&g.map(function(e,t){var n={background:t%2===0?"#efebe9":"transparent"};return a.a.createElement("div",{className:"row",key:t,style:n},a.a.createElement("div",{className:"left-cell"},e.replace(/_/g," ")),a.a.createElement("div",{className:"right-cell"},Array.isArray(d[e])?d[e].map(function(e,t){return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(l.b,{to:j(e)},O(o,e)?O(o,e):j(e))," ",a.a.createElement("br",null))}):function(e){return/https/.test(e)}(d[e])&&j(d[e])?a.a.createElement(l.b,{to:j(d[e])},"url"!==e&&O(o,d[e])?O(o,d[e]):j(d[e])):d[e]))})))}),J=(n(57),n(58),function(e){var t=e.title,n=e.to;return a.a.createElement("div",{className:"left-section-item"},a.a.createElement(l.c,{to:n,activeClassName:"selected-left"},a.a.createElement("h5",null,t)))}),M=Object(g.b)({slice:"errors",initialState:{connectionError:{isError:!1,log:""},notFoundError:{isError:!1,type:void 0,log:""}},reducers:{setConnectionError:function(e,t){var n=t.payload,r=n.isError,a=n.log;e.connectionError={isError:r,log:a}},setNotFoundError:function(e,t){var n=t.payload,r=n.isError,a=n.log,c=n.type;e.notFoundError={isError:r,log:a,type:c}}}}),T=M.actions,z=T.setConnectionError,G=T.setNotFoundError,U=M.reducer,Y=n(30),$=n(5),_=n.n($),K=(n(60),n(61),function(e){var t,n=e.children,r=e.to,c=e.clickHandler,o=e.style;return a.a.createElement("button",{className:"page-button",onClick:c,style:o},r?a.a.createElement(l.b,{to:(t=r,t.replace("//","/"))},n):n)}),L=function(e){var t=e.page,n=e.pagesCount,c=t>1,o=t>2,i=t<n,l=n-t>1,m=Object(r.useState)([]),f=Object(u.a)(m,2),g=f[0],p=f[1],d=Object(r.useState)([]),E=Object(u.a)(d,2),h=E[0],v=E[1],b=Object(r.useState)(!1),j=Object(u.a)(b,2),O=j[0],y=j[1],x=Object(r.useState)(!1),k=Object(u.a)(x,2),w=k[0],N=k[1],F=Object(s.h)().url,S=_.a.mark(function e(t,n){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<n)){e.next=5;break}return e.next=3,t++;case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}),C=function(){N(!1),y(!1)};return a.a.createElement("div",{className:"pagination"},g.length>0&&O&&a.a.createElement(Q,{nums:g,clicHandler:C}),h.length>0&&w&&a.a.createElement(Q,{nums:h,clicHandler:C}),a.a.createElement("ul",null,c&&a.a.createElement("li",{onClick:C},a.a.createElement(K,{to:"".concat(F,"/?page=").concat(t-1)},"<")),o&&a.a.createElement("li",{onClick:function(){var e=S(1,t);p(Object(Y.a)(e)),y(!O),N(!1)}},a.a.createElement(K,null,"...")),a.a.createElement("li",{onClick:C},a.a.createElement(K,null,t)),l&&a.a.createElement("li",{onClick:function(){var e=S(t+1,n+1);v(Object(Y.a)(e)),N(!w),y(!1)}},a.a.createElement(K,null,"...")),i&&a.a.createElement("li",{onClick:C},a.a.createElement(K,{to:"".concat(F,"/?page=").concat(t+1)},">"))))},Q=function(e){var t=e.nums,n=e.clicHandler,r=t.length>=4?4:t.length,c=function(e,t){var n=Math.floor(e/(t+1))+1,r=e%t===0?t:e%t;return{gridColumn:"".concat(r," / ").concat(r+1),gridRow:"".concat(n," / ").concat(n+1)}},o=Object(s.h)().url;return a.a.createElement("div",{className:"page-buttons-container",style:{"grid-template-columns":"repeat(".concat(r,", 39px)")}},t.map(function(e,t){return console.log(t+1),a.a.createElement(K,{key:e,to:"".concat(o,"/?page=").concat(e),clickHandler:n,style:c(t+1,4)},e)}))},X=function(){var e,t=Object(s.g)().category,n=Object(s.f)(),c=n.pathname,o=n.search,l="/".concat(t,"/")===c?h(e=o)?e.match(d.number)[0]:1:void 0,u="/".concat(t,"/")===c&&x(o)&&x(o).trim().length>0?x(o).trim():null,m=Object(i.c)(function(e){return e.categories}),f=m.entities,g=m.isFetching,p=Object(i.c)(function(e){return e.errors}),b=p.connectionError,O=p.notFoundError,y=f[t],k=y?y.activePage:1,w=Object.keys(f),N=w.length,F=Object(i.b)(),S=y&&y.count?y.count:0,C=S?Math.ceil(S/10):0,P=[],H=0;return Object(r.useEffect)(function(){N>0&&!b.isError&&(w.includes(t)?(O.isError&&F(G({isError:!1,type:void 0,log:""})),u||!y.pages||y.pages[k]?u&&y.search.query!==u&&F(I({category:t,search:u})):F(A({category:t,page:k}))):F(G({isError:!0,type:E,log:t})))}),Object(r.useEffect)(function(){!g&&!b.isError&&y&&h(o)&&!u&&l&&F(q({category:t,page:l}))}),y&&y.pages&&y.pages[k]&&!u?H=(P=y.pages[k]).length:y&&y.search&&u&&y.search.query===u&&(P=y.search.results),a.a.createElement("section",{className:"left-section"},P.map(function(e,t){return a.a.createElement(J,{key:t,title:v(e),to:j(e.url)})}),C>1&&a.a.createElement(L,{page:k,pagesCount:C}),H>0&&a.a.createElement("div",{className:"legend"},"".concat(10*(k-1)+1," - ").concat(10*(k-1)+H," of ").concat(S)))},Z=a.a.memo(function(){var e=Object(s.h)().path;return a.a.createElement("section",{className:"category-section"},a.a.createElement(X,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:e},"Select item from left part"),a.a.createElement(s.a,{path:"".concat(e,"/:id"),component:W})))});var ee=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)(function(){var n,r=document.querySelector("#".concat(e)),a=r||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return r||(n=a,document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)),a.appendChild(t.current),function(){t.current.remove(),-1===a.childNodes.length&&a.remove()}}),t.current||(t.current=document.createElement("div")),t.current},te=(n(62),function(e){var t=e.id,n=e.children,r=ee(t);return Object(c.createPortal)(a.a.createElement("div",{className:"modal"}," ",n),r)}),ne=(n(63),function(){return a.a.createElement("div",{className:"loading"},a.a.createElement("div",{className:"dot d1"}),a.a.createElement("div",{className:"dot d2"}),a.a.createElement("div",{className:"dot d3"}))}),re=(n(64),function(){var e=Object(i.c)(function(e){return Object.keys(e.categories.entities)}),t=Object(i.c)(function(e){return e.errors}),n=t.connectionError,r=t.notFoundError,c=n.isError?".error-page .error-modal":".error-page";return a.a.createElement("div",{className:c},n.isError&&a.a.createElement("h2",null,n.log),!n.isError&&r.isError&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Error: ".concat(r.log," is NOT FOUND, try:")),a.a.createElement("ul",null,e.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement(l.b,{to:"/".concat(e,"/")},"/".concat(e,"/")))}))))}),ae=function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors}),n=t.notFoundError,r=t.connectionError,c=e.isFetching;return a.a.createElement("div",{className:"App"},a.a.createElement(l.a,null,a.a.createElement(D,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/",component:B}),a.a.createElement(s.a,{path:"/:category"},n.isError?a.a.createElement(re,null):a.a.createElement(Z,null)))),c&&!r.isError&&a.a.createElement(te,{id:"modal-root"},a.a.createElement(ne,null)),r.isError&&a.a.createElement(te,{id:"modal-root"},a.a.createElement(re,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=n(37),oe=n(9),ie=Object(oe.combineReducers)({errors:U,categories:V}),le=n(6),se=n(22),ue=n.n(se),me=_.a.mark(be),fe=_.a.mark(je),ge=_.a.mark(Oe),pe=_.a.mark(ye),de=_.a.mark(xe),Ee=_.a.mark(ke),he=_.a.mark(we),ve=_.a.mark(Ne);function be(){var e,t;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(le.b)(ue.a,b());case 3:return e=n.sent,n.next=6,e.json().then(function(e){return e});case 6:return t=n.sent,n.next=9,Object(le.c)(F(t));case 9:n.next=17;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(le.c)(H());case 15:return n.next=17,Object(le.c)(z({isError:!0,log:n.t0.message}));case 17:case"end":return n.stop()}},me,null,[[0,11]])}function je(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)(N.toString(),be);case 2:case"end":return e.stop()}},fe)}function Oe(e){var t,n,r,a,c;return _.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.page,o.prev=2,o.next=5,Object(le.b)(ue.a,b({category:n,page:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(le.c)(P({category:n,page:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(le.c)(H());case 17:return o.next=19,Object(le.c)(z({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},ge,null,[[2,13]])}function ye(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)(A.toString(),Oe);case 2:case"end":return e.stop()}},pe)}function xe(e){var t,n,r,a,c;return _.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.search,o.prev=2,o.next=5,Object(le.b)(ue.a,b({category:n,search:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(le.c)(R({category:n,query:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(le.c)(H());case 17:return o.next=19,Object(le.c)(z({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},de,null,[[2,13]])}function ke(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)(I.toString(),xe);case 2:case"end":return e.stop()}},Ee)}function we(e){var t,n,r,a,c;return _.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.url,o.prev=2,o.next=5,Object(le.b)(ue.a,b({category:n,url:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(le.c)(C({category:n,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(le.c)(H());case 17:return o.next=19,Object(le.c)(z({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},he,null,[[2,13]])}function Ne(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)(S.toString(),we);case 2:case"end":return e.stop()}},ve)}var Fe=_.a.mark(Se);function Se(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([je(),ye(),ke(),Ne()]);case 2:case"end":return e.stop()}},Fe)}var Ce=Object(ce.a)(),qe=Object(g.a)({reducer:ie,middleware:[Ce]});Ce.run(Se),o.a.render(a.a.createElement(i.a,{store:qe},a.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.ddf53351.chunk.js.map