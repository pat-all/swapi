(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{38:function(e,t,n){e.exports=n(69)},43:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),o=n.n(c),i=(n(43),n(5)),l=(n(48),n(8)),s=n(17),u=(n(49),n(16)),m=(n(34),{string:/[a-z]+/,number:/[0-9]+/,page:/\?page=[0-9]+/,search:/\?search=.+/}),f="CATEGORY",g=function(e){return m.page.test(e)},d=function(e){return e[Object.keys(e)[0]]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,n=e.page,r=e.search,a=e.url;return!t||n||r?t&&n>0&&!r?"".concat("/api","/").concat(t,"/?page=").concat(n):t&&!n&&r?"".concat("/api","/").concat(t,"/?search=").concat(r):!a||t||n||r?"/api":"".concat("/api").concat(a):"".concat("/api","/").concat(t)},E=function(e){return e.includes("https://swapi.co/api")?e.replace("https://swapi.co/api",""):e},v=function(e,t){var n=e[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.string,n=e.number;return t?t.match(m.string)[0]:n?"number"===typeof n?n:n.match(m.number)[0]:null}({string:E(t)})],r=h(n,{fieldName:"url",fieldValue:t}),a=r.length>0?r[0]:null;return a?d(a):null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.pages,r=t.fieldName,a=t.fieldValue,c="url"===r,o=[];if(n&&r&&a){for(var i=0;i<n.length;i++){var l=n[i];if(l)for(var s=0;s<l.length;s++){var u=l[s];if(u[r].includes(a)&&(o.push(u),c))return o}if(c&&o.length>0)return o}return o}return o},b=function(e){return function(e){return m.search.test(e)}(e)?e.replace("?search=",""):null},j=Object(u.b)({slice:"categories",initialState:{isFetching:!1,entities:{}},reducers:{requestAll:function(e){e.isFetching=!0},receiveAll:function(e,t){e.isFetching=!1,Object.keys(t.payload).map(function(t){return e.entities[t]={count:0,activePage:1,pages:[],search:{query:"",results:[]}}})},requestPage:function(e,t){},receivePage:function(e,t){var n=t.payload,r=n.category,a=n.json,c=n.page,o=a.count,i=a.results;e.entities[r].count=o,e.entities[r].pages[c]=i},setActivePage:function(e,t){var n=t.payload,r=n.category,a=n.page;e.entities[r].activePage=Number(a)},requestItem:function(e,t){},receiveItem:function(e,t){var n=t.payload,r=n.category,a=n.json;e.entities[r].pages[0]?e.entities[r].pages[0].push(a.results[0]):e.entities[r].pages[0]=[a.results[0]]},cancelFetching:function(e){e.isFetching=!1},searchRequest:function(e,t){},receiveSearchData:function(e,t){var n=t.payload,r=n.category,a=n.query,c=n.json.results,o=e.entities[r].pages;e.entities[r].search={query:a,results:c},c.forEach(function(t){0===h(e.entities[r],{fieldName:"url",fieldValue:t.url}).length&&(o[0]?o[0].push(t):o[0]=[t])})}}}),O=j.actions,y=O.requestAll,N=O.receiveAll,x=O.requestItem,k=O.receiveItem,w=O.setActivePage,F=O.requestPage,S=O.receivePage,A=(O.fetchDataFail,O.cancelFetching),C=O.searchRequest,q=O.receiveSearchData,P=j.reducer,B=function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors.connectionError.isError}),n=Object.keys(e.entities),a=Object(i.b)(),c=e.isFetching;return Object(r.useEffect)(function(){t||c||0!==n.length||a(y())}),n},H=n(18),I=(n(51),function(e){var t=e.children;return a.a.createElement("button",{className:"nav-item header-button"},t)}),R=(n(52),function(){var e=Object(r.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],o=Object(s.f)().pathname,i=o.split("/")[1],u=1===o.length,m=n.trim().length>0;return a.a.createElement("div",{className:"search"},a.a.createElement("input",{disabled:u,type:"text",placeholder:"Search",value:n,onChange:function(e){c(e.target.value)}}),u||!m?a.a.createElement(I,null,"Search"):a.a.createElement(I,null,a.a.createElement(l.b,{to:"/".concat(i,"/?search=").concat(n)},"Search")))}),V=Object(u.b)({slice:"features",initialState:{isBurgerActive:!1},reducers:{setBurgerActive:function(e,t){var n=t.payload.isActive;e.isBurgerActive=n}}}),D=V.actions.setBurgerActive,T=V.reducer,W=(n(54),function(){var e=Object(i.b)(),t=Object(i.c)(function(e){return e.features.isBurgerActive});return a.a.createElement("div",{className:t?"hamburger active-burger":"hamburger",onClick:function(){e(D({isActive:!t}))}},a.a.createElement("span",null))}),J=(n(55),function(e){var t=e.categoriesNames;return a.a.createElement("nav",{className:"navigation"},a.a.createElement("div",{className:"nav-item nav-link"},a.a.createElement(l.c,{exact:!0,to:"/",activeClassName:"selected"},"home")),t.map(function(e){return a.a.createElement("div",{key:e,className:"nav-item nav-link"},a.a.createElement(l.c,{to:"/".concat(e),activeClassName:"selected"},e))}))}),M=a.a.memo(function(){var e=B();return a.a.createElement("header",null,a.a.createElement("div",{className:"header-section"},a.a.createElement("div",{className:"header-logo nav-item"},"SWAPI"),a.a.createElement("div",{className:"main-menu"},a.a.createElement(J,{categoriesNames:e})),a.a.createElement("div",{className:"header-section header-search"},a.a.createElement(R,null))),a.a.createElement("div",{className:"small-menu"},a.a.createElement(W,null)))}),z=(n(56),function(){return a.a.createElement("div",{className:"home"},a.a.createElement("h2",null,"Hello, this is Home component"))}),G=(n(57),n(58),function(){var e=Object(s.h)().url,t=Object(i.b)(),n=Object(s.g)().category,c=Object(i.c)(function(e){return e.categories}),o=c.entities,u=c.isFetching,m=Object(i.c)(function(e){return e.errors}).connectionError,f=o[n],g=[],d=[],p=null;return Object(r.useEffect)(function(){u||m.isError||!f||p||0!==h(f,{fieldName:"url",fieldValue:e}).length||t(x({category:n,url:e}))}),!u&&f&&e&&!p&&(d=h(f,{fieldName:"url",fieldValue:e}),g=(p=d.length>0?d[0]:null)?Object.keys(p):[]),a.a.createElement("section",{className:"right-section"},a.a.createElement("div",{className:"data-container"},p&&g.length>0&&g.map(function(e,t){var n={background:t%2===0?"#efebe9":"transparent"};return a.a.createElement("div",{className:"row",key:t,style:n},a.a.createElement("div",{className:"left-cell"},e.replace(/_/g," ")),a.a.createElement("div",{className:"right-cell"},Array.isArray(p[e])?p[e].map(function(e,t){return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(l.b,{to:E(e)},v(o,e)?v(o,e):E(e))," ",a.a.createElement("br",null))}):function(e){return/https/.test(e)}(p[e])&&E(p[e])?a.a.createElement(l.b,{to:E(p[e])},"url"!==e&&v(o,p[e])?v(o,p[e]):E(p[e])):p[e]))})))}),U=(n(59),n(60),function(e){var t=e.title,n=e.to;return a.a.createElement("div",{className:"left-section-item"},a.a.createElement(l.c,{to:n,activeClassName:"selected-left"},a.a.createElement("h5",null,t)))}),Y=Object(u.b)({slice:"errors",initialState:{connectionError:{isError:!1,log:""},notFoundError:{isError:!1,type:void 0,log:""}},reducers:{setConnectionError:function(e,t){var n=t.payload,r=n.isError,a=n.log;e.connectionError={isError:r,log:a}},setNotFoundError:function(e,t){var n=t.payload,r=n.isError,a=n.log,c=n.type;e.notFoundError={isError:r,log:a,type:c}}}}),$=Y.actions,_=$.setConnectionError,K=$.setNotFoundError,L=Y.reducer,Q=n(30),X=n(6),Z=n.n(X),ee=(n(62),n(63),function(e){var t,n=e.children,r=e.to,c=e.clickHandler,o=e.style;return a.a.createElement("button",{className:"page-button",onClick:c,style:o},r?a.a.createElement(l.b,{to:(t=r,t.replace("//","/"))},n):n)}),te=(n(64),function(e){var t=e.nums,n=e.clicHandler,r=t.length>=4?4:t.length,c=function(e,t){var n=Math.floor(e/(t+1))+1,r=e%t===0?t:e%t;return{gridColumn:"".concat(r," / ").concat(r+1),gridRow:"".concat(n," / ").concat(n+1)}},o=Object(s.h)().url;return a.a.createElement("div",{className:"page-buttons-container",style:{gridTemplateColumns:"repeat(".concat(r,", 39px)")}},t.map(function(e,t){return a.a.createElement(ee,{key:e,to:"".concat(o,"/?page=").concat(e),clickHandler:n,style:c(t+1,4)},e)}))}),ne=function(e){var t=e.page,n=e.pagesCount,c=t>1,o=t>2,i=t<n,l=n-t>1,u=Object(r.useState)([]),m=Object(H.a)(u,2),f=m[0],g=m[1],d=Object(r.useState)([]),p=Object(H.a)(d,2),E=p[0],v=p[1],h=Object(r.useState)(!1),b=Object(H.a)(h,2),j=b[0],O=b[1],y=Object(r.useState)(!1),N=Object(H.a)(y,2),x=N[0],k=N[1],w=Object(s.h)().url,F=Z.a.mark(function e(t,n){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<n)){e.next=5;break}return e.next=3,t++;case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}),S=function(){k(!1),O(!1)};return a.a.createElement("div",{className:"pagination"},f.length>0&&j&&a.a.createElement(te,{nums:f,clicHandler:S}),E.length>0&&x&&a.a.createElement(te,{nums:E,clicHandler:S}),a.a.createElement("ul",null,c&&a.a.createElement("li",{onClick:S},a.a.createElement(ee,{to:"".concat(w,"/?page=").concat(t-1)},"<")),o&&a.a.createElement("li",{onClick:function(){var e=F(1,t);g(Object(Q.a)(e)),O(!j),k(!1)}},a.a.createElement(ee,null,"...")),a.a.createElement("li",{onClick:S},a.a.createElement(ee,null,t)),l&&a.a.createElement("li",{onClick:function(){var e=F(t+1,n+1);v(Object(Q.a)(e)),k(!x),O(!1)}},a.a.createElement(ee,null,"...")),i&&a.a.createElement("li",{onClick:S},a.a.createElement(ee,{to:"".concat(w,"/?page=").concat(t+1)},">"))))},re=function(){var e,t=Object(s.g)().category,n=Object(s.f)(),c=n.pathname,o=n.search,l="/".concat(t,"/")===c?g(e=o)?e.match(m.number)[0]:1:void 0,u="/".concat(t,"/")===c&&b(o)&&b(o).trim().length>0?b(o).trim():null,p=Object(i.c)(function(e){return e.categories}),v=p.entities,h=p.isFetching,j=Object(i.c)(function(e){return e.errors}),O=j.connectionError,y=j.notFoundError,N=v[t],x=N?N.activePage:1,k=Object.keys(v),S=k.length,A=Object(i.b)(),q=N&&N.count?N.count:0,P=q?Math.ceil(q/10):0,B=[],H=0;return Object(r.useEffect)(function(){S>0&&!O.isError&&(k.includes(t)?(y.isError&&A(K({isError:!1,type:void 0,log:""})),u||!N.pages||N.pages[x]?u&&N.search.query!==u&&A(C({category:t,search:u})):A(F({category:t,page:x}))):A(K({isError:!0,type:f,log:t})))}),Object(r.useEffect)(function(){!h&&!O.isError&&N&&g(o)&&!u&&l&&A(w({category:t,page:l}))}),N&&N.pages&&N.pages[x]&&!u?H=(B=N.pages[x]).length:N&&N.search&&u&&N.search.query===u&&(B=N.search.results),a.a.createElement("section",{className:"left-section"},B.map(function(e,t){return a.a.createElement(U,{key:t,title:d(e),to:E(e.url)})}),!u&&P>1&&a.a.createElement(ne,{page:x,pagesCount:P}),!u&&H>0&&a.a.createElement("div",{className:"legend"},"".concat(10*(x-1)+1," - ").concat(10*(x-1)+H," of ").concat(q)))},ae=a.a.memo(function(){var e=Object(s.h)().path;return a.a.createElement("section",{className:"category-section"},a.a.createElement(re,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:e},"Select item from left part"),a.a.createElement(s.a,{path:"".concat(e,"/:id"),component:G})))});var ce=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)(function(){var n,r=document.querySelector("#".concat(e)),a=r||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return r||(n=a,document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)),a.appendChild(t.current),function(){t.current.remove(),-1===a.childNodes.length&&a.remove()}}),t.current||(t.current=document.createElement("div")),t.current},oe=(n(65),function(e){var t=e.id,n=e.children,r=ce(t);return Object(c.createPortal)(a.a.createElement("div",{className:"modal"}," ",n),r)}),ie=(n(66),function(){return a.a.createElement("div",{className:"loading"},a.a.createElement("div",{className:"dot d1"}),a.a.createElement("div",{className:"dot d2"}),a.a.createElement("div",{className:"dot d3"}))}),le=(n(67),function(){var e=Object(i.c)(function(e){return Object.keys(e.categories.entities)}),t=Object(i.c)(function(e){return e.errors}),n=t.connectionError,r=t.notFoundError,c=n.isError?".error-page .error-modal":".error-page";return a.a.createElement("div",{className:c},n.isError&&a.a.createElement("h2",null,n.log),!n.isError&&r.isError&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Error: ".concat(r.log," is NOT FOUND, try:")),a.a.createElement("ul",null,e.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement(l.b,{to:"/".concat(e,"/")},"/".concat(e,"/")))}))))}),se=(n(68),function(){var e=B();return a.a.createElement("div",{className:"small-nav"},a.a.createElement(J,{categoriesNames:e}),a.a.createElement("div",{className:"header-section small-search"},a.a.createElement(R,null)))}),ue=function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors}),n=t.notFoundError,r=t.connectionError,c=e.isFetching,o=Object(i.c)(function(e){return e.features.isBurgerActive});return a.a.createElement("div",{className:"App"},a.a.createElement(l.a,null,a.a.createElement(M,null),o&&a.a.createElement(se,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/",component:z}),a.a.createElement(s.a,{path:"/:category"},n.isError?a.a.createElement(le,null):a.a.createElement(ae,null)))),c&&!r.isError&&a.a.createElement(oe,{id:"modal-root"},a.a.createElement(ie,null)),r.isError&&a.a.createElement(oe,{id:"modal-root"},a.a.createElement(le,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=n(37),fe=n(9),ge=Object(fe.combineReducers)({features:T,errors:L,categories:P}),de=n(7),pe=n(22),Ee=n.n(pe),ve=Z.a.mark(ke),he=Z.a.mark(we),be=Z.a.mark(Fe),je=Z.a.mark(Se),Oe=Z.a.mark(Ae),ye=Z.a.mark(Ce),Ne=Z.a.mark(qe),xe=Z.a.mark(Pe);function ke(){var e,t;return Z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(de.b)(Ee.a,p());case 3:return e=n.sent,n.next=6,e.json().then(function(e){return e});case 6:return t=n.sent,n.next=9,Object(de.c)(N(t));case 9:n.next=17;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(de.c)(A());case 15:return n.next=17,Object(de.c)(_({isError:!0,log:n.t0.message}));case 17:case"end":return n.stop()}},ve,null,[[0,11]])}function we(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(y.toString(),ke);case 2:case"end":return e.stop()}},he)}function Fe(e){var t,n,r,a,c;return Z.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.page,o.prev=2,o.next=5,Object(de.b)(Ee.a,p({category:n,page:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(de.c)(S({category:n,page:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(de.c)(A());case 17:return o.next=19,Object(de.c)(_({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},be,null,[[2,13]])}function Se(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(F.toString(),Fe);case 2:case"end":return e.stop()}},je)}function Ae(e){var t,n,r,a,c;return Z.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.search,o.prev=2,o.next=5,Object(de.b)(Ee.a,p({category:n,search:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(de.c)(q({category:n,query:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(de.c)(A());case 17:return o.next=19,Object(de.c)(_({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},Oe,null,[[2,13]])}function Ce(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(C.toString(),Ae);case 2:case"end":return e.stop()}},ye)}function qe(e){var t,n,r,a,c;return Z.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.url,o.prev=2,o.next=5,Object(de.b)(Ee.a,p({category:n,url:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(de.c)(k({category:n,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(de.c)(A());case 17:return o.next=19,Object(de.c)(_({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},Ne,null,[[2,13]])}function Pe(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.d)(x.toString(),qe);case 2:case"end":return e.stop()}},xe)}var Be=Z.a.mark(He);function He(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.a)([we(),Se(),Ce(),Pe()]);case 2:case"end":return e.stop()}},Be)}var Ie=Object(me.a)(),Re=Object(u.a)({reducer:ge,middleware:[Ie]});Ie.run(He),o.a.render(a.a.createElement(i.a,{store:Re},a.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.cef77df8.chunk.js.map