(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{38:function(e,t,n){e.exports=n(70)},43:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),o=n.n(c),i=(n(43),n(4)),l=(n(48),n(8)),s=n(17),u=n(16),m=Object(u.b)({slice:"features",initialState:{isBurgerActive:!1,isLeftSectionActive:!1},reducers:{setBurgerActive:function(e,t){var n=t.payload;e.isBurgerActive=n},setLeftSectionActive:function(e,t){var n=t.payload;e.isLeftSectionActive=n}}}),f=m.actions,g=f.setBurgerActive,v=f.setLeftSectionActive,d=m.reducer,p=function(){var e=Object(i.b)();return function(t){return e(v(t))}},E=(n(50),n(35),{string:/[a-z]+/,number:/[0-9]+/,page:/\?page=[0-9]+/,search:/\?search=.+/}),h="CATEGORY",b=function(e){return E.page.test(e)},j=function(e){return e[Object.keys(e)[0]]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,n=e.page,r=e.search,a=e.url;return!t||n||r?t&&n>0&&!r?"".concat("/api","/").concat(t,"/?page=").concat(n):t&&!n&&r?"".concat("/api","/").concat(t,"/?search=").concat(r):!a||t||n||r?"/api":"".concat("/api").concat(a):"".concat("/api","/").concat(t)},y=function(e){return e.includes("https://swapi.co/api")?e.replace("https://swapi.co/api",""):e},N=function(e,t){var n=e[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.string,n=e.number;return t?t.match(E.string)[0]:n?"number"===typeof n?n:n.match(E.number)[0]:null}({string:y(t)})],r=x(n,{fieldName:"url",fieldValue:t}),a=r.length>0?r[0]:null;return a?j(a):null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.pages,r=t.fieldName,a=t.fieldValue,c="url"===r,o=[];if(n&&r&&a){for(var i=0;i<n.length;i++){var l=n[i];if(l)for(var s=0;s<l.length;s++){var u=l[s];if(u[r].includes(a)&&(o.push(u),c))return o}if(c&&o.length>0)return o}return o}return o},k=function(e){return function(e){return E.search.test(e)}(e)?e.replace("?search=",""):null},w=Object(u.b)({slice:"categories",initialState:{isFetching:!1,entities:{}},reducers:{requestAll:function(e){e.isFetching=!0},receiveAll:function(e,t){e.isFetching=!1,Object.keys(t.payload).map(function(t){return e.entities[t]={count:0,activePage:1,pages:[],search:{query:"",results:[]}}})},requestPage:function(e,t){},receivePage:function(e,t){var n=t.payload,r=n.category,a=n.json,c=n.page,o=a.count,i=a.results;e.entities[r].count=o,e.entities[r].pages[c]=i},setActivePage:function(e,t){var n=t.payload,r=n.category,a=n.page;e.entities[r].activePage=Number(a)},requestItem:function(e,t){},receiveItem:function(e,t){var n=t.payload,r=n.category,a=n.json;e.entities[r].pages[0]?e.entities[r].pages[0].push(a.results[0]):e.entities[r].pages[0]=[a.results[0]]},cancelFetching:function(e){e.isFetching=!1},searchRequest:function(e,t){},receiveSearchData:function(e,t){var n=t.payload,r=n.category,a=n.query,c=n.json.results,o=e.entities[r].pages;e.entities[r].search={query:a,results:c},c.forEach(function(t){0===x(e.entities[r],{fieldName:"url",fieldValue:t.url}).length&&(o[0]?o[0].push(t):o[0]=[t])})}}}),A=w.actions,S=A.requestAll,C=A.receiveAll,F=A.requestItem,q=A.receiveItem,P=A.setActivePage,B=A.requestPage,H=A.receivePage,I=(A.fetchDataFail,A.cancelFetching),L=A.searchRequest,R=A.receiveSearchData,V=w.reducer,D=function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors.connectionError.isError}),n=Object.keys(e.entities),a=Object(i.b)(),c=e.isFetching;return Object(r.useEffect)(function(){t||c||0!==n.length||a(S())}),n},T=function(){var e=Object(i.b)();return function(t){return e(g(t))}},W=n(18),J=(n(51),function(e){var t=e.children;return a.a.createElement("button",{className:"nav-item header-button"},t)}),M=(n(52),function(){var e=Object(r.useState)(""),t=Object(W.a)(e,2),n=t[0],c=t[1],o=Object(s.f)().pathname,i=o.split("/")[1],u=1===o.length,m=n.trim().length>0;return a.a.createElement("div",{className:"search"},a.a.createElement("input",{disabled:u,type:"text",placeholder:"Search",value:n,onChange:function(e){c(e.target.value)}}),u||!m?a.a.createElement(J,null,"Search"):a.a.createElement(J,null,a.a.createElement(l.b,{to:"/".concat(i,"/?search=").concat(n)},"Search")))}),z=(n(54),function(e){var t=e.isActive,n=e.toggleActive;return a.a.createElement("div",{className:t?"hamburger active-burger":"hamburger",onClick:n},a.a.createElement("span",null))}),G=(n(55),function(e){var t=e.categoriesNames;return a.a.createElement("nav",{className:"navigation"},a.a.createElement("div",{className:"nav-item nav-link"},a.a.createElement(l.c,{exact:!0,to:"/",activeClassName:"selected"},"home")),t.map(function(e){return a.a.createElement("div",{key:e,className:"nav-item nav-link"},a.a.createElement(l.c,{to:"/".concat(e),activeClassName:"selected"},e))}))}),U=a.a.memo(function(){var e=D(),t=T(),n=Object(i.c)(function(e){return e.features.isBurgerActive});return a.a.createElement("header",null,a.a.createElement("div",{className:"header-section"},a.a.createElement("div",{className:"header-logo nav-item"},"SWAPI"),a.a.createElement("div",{className:"main-menu"},a.a.createElement(G,{categoriesNames:e})),a.a.createElement("div",{className:"header-section header-search"},a.a.createElement(M,null))),a.a.createElement("div",{className:"small-menu"},a.a.createElement(z,{isActive:n,toggleActive:function(){t(!n)}})))}),Y=(n(56),function(){return a.a.createElement("div",{className:"home"},a.a.createElement("h2",null,"Hello, this is Home component"))}),$=(n(57),n(58),function(){var e=Object(s.h)().url,t=Object(i.b)(),n=Object(s.g)().category,c=Object(i.c)(function(e){return e.categories}),o=c.entities,u=c.isFetching,m=Object(i.c)(function(e){return e.errors}).connectionError,f=o[n],g=[],v=[],d=null;return Object(r.useEffect)(function(){u||m.isError||!f||d||0!==x(f,{fieldName:"url",fieldValue:e}).length||t(F({category:n,url:e}))}),!u&&f&&e&&!d&&(v=x(f,{fieldName:"url",fieldValue:e}),g=(d=v.length>0?v[0]:null)?Object.keys(d):[]),a.a.createElement("section",{className:"right-section"},a.a.createElement("div",{className:"data-container"},d&&g.length>0&&g.map(function(e,t){var n={background:t%2===0?"#efebe9":"transparent"};return a.a.createElement("div",{className:"row",key:t,style:n},a.a.createElement("div",{className:"left-cell"},e.replace(/_/g," ")),a.a.createElement("div",{className:"right-cell"},Array.isArray(d[e])?d[e].map(function(e,t){return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(l.b,{to:y(e)},N(o,e)?N(o,e):y(e))," ",a.a.createElement("br",null))}):function(e){return/https/.test(e)}(d[e])&&y(d[e])?a.a.createElement(l.b,{to:y(d[e])},"url"!==e&&N(o,d[e])?N(o,d[e]):y(d[e])):d[e]))})))}),_=(n(59),n(60),function(e){var t=e.title,n=e.to,r=e.toggleActive;return a.a.createElement("div",{className:"left-section-item",onClick:r},a.a.createElement(l.c,{to:n,activeClassName:"selected-left"},a.a.createElement("h5",null,t)))}),K=Object(u.b)({slice:"errors",initialState:{connectionError:{isError:!1,log:""},notFoundError:{isError:!1,type:void 0,log:""}},reducers:{setConnectionError:function(e,t){var n=t.payload,r=n.isError,a=n.log;e.connectionError={isError:r,log:a}},setNotFoundError:function(e,t){var n=t.payload,r=n.isError,a=n.log,c=n.type;e.notFoundError={isError:r,log:a,type:c}}}}),Q=K.actions,X=Q.setConnectionError,Z=Q.setNotFoundError,ee=K.reducer,te=n(30),ne=n(6),re=n.n(ne),ae=(n(62),n(63),function(e){var t,n=e.children,r=e.to,c=e.clickHandler,o=e.style;return a.a.createElement("button",{className:"page-button",onClick:c,style:o},r?a.a.createElement(l.b,{to:(t=r,t.replace("//","/"))},n):n)}),ce=(n(64),function(e){var t=e.nums,n=e.clicHandler,r=t.length>=4?4:t.length,c=function(e,t){var n=Math.floor(e/(t+1))+1,r=e%t===0?t:e%t;return{gridColumn:"".concat(r," / ").concat(r+1),gridRow:"".concat(n," / ").concat(n+1)}},o=Object(s.h)().url;return a.a.createElement("div",{className:"page-buttons-container",style:{gridTemplateColumns:"repeat(".concat(r,", 39px)")}},t.map(function(e,t){return a.a.createElement(ae,{key:e,to:"".concat(o,"/?page=").concat(e),clickHandler:n,style:c(t+1,4)},e)}))}),oe=function(e){var t=e.page,n=e.pagesCount,c=t>1,o=t>2,i=t<n,l=n-t>1,u=Object(r.useState)([]),m=Object(W.a)(u,2),f=m[0],g=m[1],v=Object(r.useState)([]),d=Object(W.a)(v,2),p=d[0],E=d[1],h=Object(r.useState)(!1),b=Object(W.a)(h,2),j=b[0],O=b[1],y=Object(r.useState)(!1),N=Object(W.a)(y,2),x=N[0],k=N[1],w=Object(s.h)().url,A=re.a.mark(function e(t,n){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<n)){e.next=5;break}return e.next=3,t++;case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}),S=function(){k(!1),O(!1)};return a.a.createElement("div",{className:"pagination"},f.length>0&&j&&a.a.createElement(ce,{nums:f,clicHandler:S}),p.length>0&&x&&a.a.createElement(ce,{nums:p,clicHandler:S}),a.a.createElement("ul",null,c&&a.a.createElement("li",{onClick:S},a.a.createElement(ae,{to:"".concat(w,"/?page=").concat(t-1)},"<")),o&&a.a.createElement("li",{onClick:function(){var e=A(1,t);g(Object(te.a)(e)),O(!j),k(!1)}},a.a.createElement(ae,null,"...")),a.a.createElement("li",{onClick:S},a.a.createElement(ae,null,t)),l&&a.a.createElement("li",{onClick:function(){var e=A(t+1,n+1);E(Object(te.a)(e)),k(!x),O(!1)}},a.a.createElement(ae,null,"...")),i&&a.a.createElement("li",{onClick:S},a.a.createElement(ae,{to:"".concat(w,"/?page=").concat(t+1)},">"))))},ie=function(){var e,t=Object(s.g)().category,n=Object(s.f)(),c=n.pathname,o=n.search,l="/".concat(t,"/")===c?b(e=o)?e.match(E.number)[0]:1:void 0,u="/".concat(t,"/")===c&&k(o)&&k(o).trim().length>0?k(o).trim():null,m=Object(i.c)(function(e){return e.categories}),f=m.entities,g=m.isFetching,v=Object(i.c)(function(e){return e.errors}),d=v.connectionError,O=v.notFoundError,N=f[t],x=N?N.activePage:1,w=Object.keys(f),A=w.length,S=Object(i.b)(),C=Object(i.c)(function(e){return e.features.isLeftSectionActive}),F=N&&N.count?N.count:0,q=F?Math.ceil(F/10):0,H=p(),I=function(){H(!C)},R=[],V=0;return Object(r.useEffect)(function(){A>0&&!d.isError&&(w.includes(t)?(O.isError&&S(Z({isError:!1,type:void 0,log:""})),u||!N.pages||N.pages[x]?u&&N.search.query!==u&&S(L({category:t,search:u})):S(B({category:t,page:x}))):S(Z({isError:!0,type:h,log:t})))}),Object(r.useEffect)(function(){!g&&!d.isError&&N&&b(o)&&!u&&l&&S(P({category:t,page:l}))}),N&&N.pages&&N.pages[x]&&!u?V=(R=N.pages[x]).length:N&&N.search&&u&&N.search.query===u&&(R=N.search.results),a.a.createElement("section",{className:C?"left-section active":"left-section"},R.map(function(e,t){return a.a.createElement(_,{key:t,title:j(e),to:y(e.url),toggleActive:I})}),!u&&q>1&&a.a.createElement(oe,{page:x,pagesCount:q}),!u&&V>0&&a.a.createElement("div",{className:"legend"},"".concat(10*(x-1)+1," - ").concat(10*(x-1)+V," of ").concat(F)))},le=a.a.memo(function(){var e=Object(s.h)().path;return a.a.createElement("section",{className:"category-section"},a.a.createElement(ie,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:e},"Select item from left part"),a.a.createElement(s.a,{path:"".concat(e,"/:id"),component:$})))});var se=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)(function(){var n,r=document.querySelector("#".concat(e)),a=r||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return r||(n=a,document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)),a.appendChild(t.current),function(){t.current.remove(),-1===a.childNodes.length&&a.remove()}}),t.current||(t.current=document.createElement("div")),t.current},ue=(n(65),function(e){var t=e.id,n=e.children,r=se(t);return Object(c.createPortal)(a.a.createElement("div",{className:"modal"}," ",n),r)}),me=(n(66),function(){return a.a.createElement("div",{className:"loading"},a.a.createElement("div",{className:"dot d1"}),a.a.createElement("div",{className:"dot d2"}),a.a.createElement("div",{className:"dot d3"}))}),fe=(n(67),function(){var e=Object(i.c)(function(e){return Object.keys(e.categories.entities)}),t=Object(i.c)(function(e){return e.errors}),n=t.connectionError,r=t.notFoundError,c=n.isError?".error-page .error-modal":".error-page";return a.a.createElement("div",{className:c},n.isError&&a.a.createElement("h2",null,n.log),!n.isError&&r.isError&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Error: ".concat(r.log," is NOT FOUND, try:")),a.a.createElement("ul",null,e.map(function(e,t){return a.a.createElement("li",{key:t},a.a.createElement(l.b,{to:"/".concat(e,"/")},"/".concat(e,"/")))}))))}),ge=(n(68),function(){var e=D(),t=T(),n=Object(i.c)(function(e){return e.features.isBurgerActive});return a.a.createElement("div",{className:"small-nav",onClick:function(){t(!n)}},a.a.createElement(G,{categoriesNames:e}),a.a.createElement("div",{className:"header-section small-search"},a.a.createElement(M,null)))}),ve=(n(69),function(e){var t=e.isActive,n=e.toggleActive;return a.a.createElement("div",{className:t?"swipe-button active":"swipe-button",onClick:n},a.a.createElement("span",null))}),de=function(){var e=Object(i.c)(function(e){return e.categories}),t=Object(i.c)(function(e){return e.errors}),n=t.notFoundError,r=t.connectionError,c=e.isFetching,o=Object(i.c)(function(e){return e.features.isBurgerActive}),u=Object(i.c)(function(e){return e.features.isLeftSectionActive}),m=p();return a.a.createElement("div",{className:"App"},a.a.createElement(l.a,null,a.a.createElement(U,null),o&&a.a.createElement(ge,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/",component:Y}),a.a.createElement(s.a,{path:"/:category"},n.isError?a.a.createElement(fe,null):a.a.createElement(le,null)))),c&&!r.isError&&a.a.createElement(ue,{id:"modal-root"},a.a.createElement(me,null)),r.isError&&a.a.createElement(ue,{id:"modal-root"},a.a.createElement(fe,null)),a.a.createElement(ve,{isActive:u,toggleActive:function(){m(!u)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=n(37),Ee=n(9),he=Object(Ee.combineReducers)({features:d,errors:ee,categories:V}),be=n(7),je=n(22),Oe=n.n(je),ye=re.a.mark(Fe),Ne=re.a.mark(qe),xe=re.a.mark(Pe),ke=re.a.mark(Be),we=re.a.mark(He),Ae=re.a.mark(Ie),Se=re.a.mark(Le),Ce=re.a.mark(Re);function Fe(){var e,t;return re.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(be.b)(Oe.a,O());case 3:return e=n.sent,n.next=6,e.json().then(function(e){return e});case 6:return t=n.sent,n.next=9,Object(be.c)(C(t));case 9:n.next=17;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(be.c)(I());case 15:return n.next=17,Object(be.c)(X({isError:!0,log:n.t0.message}));case 17:case"end":return n.stop()}},ye,null,[[0,11]])}function qe(){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.d)(S.toString(),Fe);case 2:case"end":return e.stop()}},Ne)}function Pe(e){var t,n,r,a,c;return re.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.page,o.prev=2,o.next=5,Object(be.b)(Oe.a,O({category:n,page:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(be.c)(H({category:n,page:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(be.c)(I());case 17:return o.next=19,Object(be.c)(X({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},xe,null,[[2,13]])}function Be(){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.d)(B.toString(),Pe);case 2:case"end":return e.stop()}},ke)}function He(e){var t,n,r,a,c;return re.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.search,o.prev=2,o.next=5,Object(be.b)(Oe.a,O({category:n,search:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(be.c)(R({category:n,query:r,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(be.c)(I());case 17:return o.next=19,Object(be.c)(X({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},we,null,[[2,13]])}function Ie(){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.d)(L.toString(),He);case 2:case"end":return e.stop()}},Ae)}function Le(e){var t,n,r,a,c;return re.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.category,r=t.url,o.prev=2,o.next=5,Object(be.b)(Oe.a,O({category:n,url:r}));case 5:return a=o.sent,o.next=8,a.json().then(function(e){return e});case 8:return c=o.sent,o.next=11,Object(be.c)(q({category:n,json:c}));case 11:o.next=19;break;case 13:return o.prev=13,o.t0=o.catch(2),o.next=17,Object(be.c)(I());case 17:return o.next=19,Object(be.c)(X({isError:!0,log:o.t0.message}));case 19:case"end":return o.stop()}},Se,null,[[2,13]])}function Re(){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.d)(F.toString(),Le);case 2:case"end":return e.stop()}},Ce)}var Ve=re.a.mark(De);function De(){return re.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)([qe(),Be(),Ie(),Re()]);case 2:case"end":return e.stop()}},Ve)}var Te=Object(pe.a)(),We=Object(u.a)({reducer:he,middleware:[Te]});Te.run(De),o.a.render(a.a.createElement(i.a,{store:We},a.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.aa87c549.chunk.js.map